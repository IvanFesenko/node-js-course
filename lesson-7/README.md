# Lesson 7

- Авторизация с помощью Json Web Token (JWT)
- MVC архитектура в деталях

## Авторизация с помощью Json Web Token (JWT)

Аутентификация - проверка подлинности пользователя путём сравнения введённого им логина/пароля с данными сохранёнными в базе данных.

Авторизация - проверка прав пользователя на доступ к определенным ресурсам.


Все пользователи вашего сайта или приложения имеют абсолютно разные права доступа к нему. Например: модераторы сайта которые вносят новости и простые пользователи.
Либо же пользователи что имеют платный аккаунт и те, что имеют бесплатный.

В обоих случаях нужно каким-то образом разграничивать права этих пользователей.

Для того, чтобы пользователь мог авторизоваться в системе, у него, естественно, должна быть учётная запись в этой самой системе. Следовательно, ему нужно предоставить возможность эту учётную запись каким-то образом создать. 
Но здесь есть пара нюансов. 
Как правило, учётные данные пользователя состоят из традиционных логина и пароля (ну и необозримого количества всяких необязательных полей на вкус разработчика).

Пароли стоит хранить в шифрованном виде, для того чтобы их не смогли использовать злоумышленники. Еще более безопасный способ хранения - хеш. Это набор символов в который закодировано ваше сообщение. Раскодировать его можно лишь с помощью специального ключа. 

Даже получив в своё распоряжение хеши, злоумышленник не сможет восстановить пароли, а, следовательно, авторизоваться в системе, используя учётную запись, данные которой получил в своё распоряжение.

#### Как происходит создание  Json Web Token

- Получаем пароль от пользователя
- Генерируем хеш
- Записываем хеш
- При авторизации пользователь присылает нам логин и пароль, мы ищем его учётную запись по логину, хешируем присланный пароль, сверяем полученный хеш с тем, что записан в учётной записи
- Высылаем пользователю кодированный веб-токен
- При дальнейших действиях пользователя в системе проверяем веб-токен

Можно еще например добавить время устаревания веб-токена, проверку IP. Но базовая схема именно такова.


[О Json Web Token](http://whiteshieldsoftware.blogspot.com/2016/06/expressjs-user-login-and-registration.html)


## MVC архитектура в деталях

Хорошим примером MVC архитектуры есть Onion (Луковая) архитектура.

Это особый тип архитектуры (onion architecture)что идеально подходит для приложений с длительным жизненным циклом и сложной бизнес логикой.

Ее использование в подобных проектах приводит к легкой расширяемости, легкой поддержке, слабой связанности компонентов системы. В следствии изначально заложенного в архитектуру акцента на разделение различных аспектов приложения. 


(Статья с примером об Onion архитектуре)[https://metanit.com/sharp/mvc5/23.2.php]


## Домашнее задание

